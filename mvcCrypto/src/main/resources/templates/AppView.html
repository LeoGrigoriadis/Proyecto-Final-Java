<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>App View</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
  <link rel="icon" href="img/logo.png">
  <script src="js/dropdown.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
  <nav>
    <img src="img/logotipo.png">
    <button class="nav-user" id="us" onclick="dropdown()">user</button>
    <button class="nav-user" id="clo" onclick="close_dropdown()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
      </svg>
    </button>
  </nav>
  <div id="dropdown">
      <a href="#">Perfil</a>
      <a href="#">Cerrar sesión</a>
    </div>
  </div>
  <div class="contain">

    <section class="col-sm-3 section-top">
      <div class="content">
        <h4>Cotizaciones actuales</h4>
        <table class ="table table-hover">
          <thead>
          <tr>
            <th class="text-center"> Moneda </th>
            <th class="text-center"> Cotización (USD)</th>

          </tr>
          </thead>
          <tbody style="text-align:center">
          <tr th:each="coin: ${coins}">
            <td>BTC</td>
            <td th:text = ${coin.ask}></td>
          </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="col-sm-6 articles">
      <article>
        <h4>Saldo actual</h4>
      </article>
      <article>
        <div class="top-article">
          <h4>Últimos movimientos</h4>
          <a href="#">Ver todos</a>
        </div>
        <table class ="table table-hover" >
          <thead>
          <tr>
            <th class="text-center"> moneda </th>
            <th class="text-center"> monto </th>

          </tr>
          </thead>
          <tbody style="text-align:center">
          <tr th:each="mov: ${movs}">
            <td th:text = ${mov.id_coin.name}></td>
            <td class="dep" th:if = "${mov.type==false}" th:text ="'+'+ ${mov.balance}"></td>
            <td class="ret" th:if= "${mov.type==true}" th:text ="'-'+ ${mov.balance}"></td>
          </tr>
          </tbody>
        </table>
      </article>
    </section>
    <section class="col-sm-3 invis">
      <div class="content">
        <div class="buttons">
          <button class="button" onclick="trans()">Retirar</button>
          <button class="button" onclick="trade()">Tradear</button><br>
        </div>
          <label id="trans">
            <h4>Realizar un retiro</h4>
            <!---->
            <form th:action="@{/withdraw}" th:object="${transaction}" method="post">
              <div>
                <label>Numero de cuenta: </label>
                <input type="number" name="id_destination_user" th:field="*{id_destination_user}"/><br>
                <label>Moneda: </label>
                <input type="text" name="id_coin" th:field="*{id_coin}"/><br>
                <label>Monto: </label>
                <input type="number" step="0.0001" name="balance" th:field="*{balance}"/>
                <!--<small class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></small>-->
              </div>
              <button class="button-border button-form-margin" type="submit">Retirar</button>
            </form>


          </label>
          <label id="trade">
            <h4>Realizar cambio</h4>
            <!--th:action="@{/user/trade}" th:object="${trade}" method="post"-->
            <form>
              <div>
                <label>Moneda incial: </label>
                <input type="text" name="coin"/><br>
                <label>Monto: </label>
                <input type="number" name="balance"/><br>
                <label>Moneda destino: </label>
                <input type="text" name="coin"/>
                <!--<small class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></small>-->
              </div>
              <button class="button-border button-form-margin" type="submit">Tradear</button>
            </form>
          </label>


      </div>
    </section>

  </div>
  <footer>
    <p style="margin:2px">©® Equipo Uno</p>
    <p>
      <a href="#">Política de Privacidad</a> - <a href="#">Política de Cookies</a>
    </p>
  </footer>
</body>
</html>
